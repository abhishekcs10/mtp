<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Sniper Tutorial &#8212; Allocation Policies on Multicore Processor 1 documentation</title>
    
    <link rel="stylesheet" href="_static/scrolls.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="Allocation Policies on Multicore Processor 1 documentation" href="index.html" />
    <link rel="next" title="Setup Intel TBB" href="setup_tbb.html" />
    <link rel="prev" title="Sniper Setup" href="setup_sniper.html" /> 
  </head>
  <body role="document">
    <div id="content">
      <div class="header">
        <h1 class="heading"><a href="index.html"
          title="back to the documentation overview"><span>Sniper Tutorial</span></a></h1>
      </div>
      <div class="relnav" role="navigation" aria-label="related navigation">
        <a href="setup_sniper.html">&laquo; Sniper Setup</a> |
        <a href="#">Sniper Tutorial</a>
        | <a href="setup_tbb.html">Setup Intel TBB &raquo;</a>
      </div>
      <div id="contentwrapper">
        <div id="toc" role="navigation" aria-label="table of contents navigation">
          <h3>Table Of Contents</h3>
          <ul>
<li><a class="reference internal" href="#">Sniper Tutorial</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#demands-on-simulation">Demands on simulation</a></li>
<li><a class="reference internal" href="#experiment-design-in-architecture">Experiment Design In Architecture</a></li>
<li><a class="reference internal" href="#sniper-simulator">Sniper Simulator</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sniper">SNIPER</a><ul>
<li><a class="reference internal" href="#download-sniper">Download Sniper</a></li>
<li><a class="reference internal" href="#integration-with-benchmark">Integration With Benchmark</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        
  <div class="section" id="sniper-tutorial">
<h1>Sniper Tutorial<a class="headerlink" href="#sniper-tutorial" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Number of cores per node is increasing. So we need to simulate multicore processors using today&#8217;s technologies</p>
<div class="section" id="demands-on-simulation">
<h3>Demands on simulation<a class="headerlink" href="#demands-on-simulation" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Increasing core counts</p>
<blockquote>
<div><ul>
<li><p class="first">Linear increase in simulator workload</p>
</li>
<li><dl class="first docutils">
<dt>Single-threaded simulator sees a rising gap</dt>
<dd><ul class="first last simple">
<li>Workload: increasing target cores</li>
<li>available processing power: near-constant single-thread performance of host machine</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Need to use all cores of the host machine</p>
</li>
<li><p class="first">Parallel Simulation</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Increasing cache size</p>
<blockquote>
<div><ul class="simple">
<li>Need a large working set to fully exercise a large cache</li>
<li>Scaled-down application won&#8217;t exhibit the same behaviour</li>
<li>Long runnning simulations are required</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="experiment-design-in-architecture">
<h3>Experiment Design In Architecture<a class="headerlink" href="#experiment-design-in-architecture" title="Permalink to this headline">¶</a></h3>
<ul>
<li><dl class="first docutils">
<dt>Optimizing the probability of success.</dt>
<dd><p class="first">(finding the best architecture/parameters)</p>
<ul class="last simple">
<li>Coverage:    how    many    architecture    configuraLons    can    I    run</li>
<li>Confidence:  #benchmarks, re‐runs    for    variable    applicaLons</li>
<li>Accuracy:    simulation model detail vs. runtime</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">How many scenarios can i run</p>
<blockquote>
<div><ul class="simple">
<li>N = total number of simulaLon scenarios</li>
<li>d = days until paper deadline</li>
<li>t = average time per simulaLon</li>
<li>B = number of benchmarks</li>
<li>A = number of architectures</li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="math">
\[N = \frac{d}{t*B*A}\]</div>
</div>
<div class="section" id="sniper-simulator">
<h3>Sniper Simulator<a class="headerlink" href="#sniper-simulator" title="Permalink to this headline">¶</a></h3>
<ul>
<li><dl class="first docutils">
<dt>Hybrid Simulation Approach</dt>
<dd><ul class="first last simple">
<li>Analytical Interval Core Model</li>
<li>Micro-architecture structure simulation</li>
<li>Branch predictors, caches etc.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Hardware Validated Pin-based</p>
</li>
<li><p class="first">Models Multi-core multithreaded running multi‐threaded and multi-program workloads.</p>
</li>
<li><p class="first">Parallel simulator scales with the number of simulated cores.</p>
</li>
</ul>
<p>TOP SNIPER FEATURES</p>
<ul class="simple">
<li>Interval Model</li>
<li>CPI Stacks and InteracLve VisualizaLon</li>
<li>Parallel Multithreaded Simulator</li>
<li>x86‐64 and SSE2 support</li>
<li>Validated against Core2, Nehalem</li>
<li>Thread scheduling and migration</li>
<li>Full DVFS support</li>
<li>Shared and private caches</li>
<li>Modern branch predictor</li>
<li>Supports pthreads and OpenMP, TBB, OpenCL, MPI, ...</li>
<li>SimAPI and Python interfaces to the simulator</li>
<li>Many flavors of Linux supported (Redhat, Ubuntu, etc.)</li>
</ul>
</div>
</div>
<div class="section" id="sniper">
<h2>SNIPER<a class="headerlink" href="#sniper" title="Permalink to this headline">¶</a></h2>
<div class="section" id="download-sniper">
<h3>Download Sniper<a class="headerlink" href="#download-sniper" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://snipersim.org/w/Download">http://snipersim.org/w/Download</a>
• Download tar.gz
• Git clone</p>
<p>~/sniper$ export GRAPHITE_ROOT=$(pwd)
~/sniper$ make</p>
<ul class="simple">
<li>Running an application</li>
</ul>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>~/sniper$ ./run-sniper­ ‐- /bin/true
~/sniper/test/fft$ make run
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Maximum 1024 cores can be simulated.
Scheduling is done in round robin fashion by default.
To do custom scheduling of threads read -&gt; <a class="reference external" href="https://groups.google.com/forum/#!topic/snipersim/9dD5pVW_s3w">Custom Scheduling</a></p>
</div>
</div>
<div class="section" id="integration-with-benchmark">
<h3>Integration With Benchmark<a class="headerlink" href="#integration-with-benchmark" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Add Source code</p>
</li>
<li><dl class="first docutils">
<dt>Add __init__.py file</dt>
<dd><ul class="first last simple">
<li>Provides application invocation details</li>
<li>Define input set</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Mark ROI(region of interest)</p>
</li>
<li><p class="first">example in local/pi</p>
</li>
</ul>
</div>
</div>
</div>


      </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Abhishek Tiwari.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.6.
    </div>
  </body>
</html>